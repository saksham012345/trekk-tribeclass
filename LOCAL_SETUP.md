# üõ†Ô∏è Local Development Setup Guide

Follow these steps to run Trek Tribe locally on your Windows machine.

## üìã Prerequisites

1. **Node.js** (version 18 or higher)
   - Download from [nodejs.org](https://nodejs.org/)
   - Verify installation: `node --version` and `npm --version`

2. **MongoDB** (choose one option):
   - **Option A**: Install MongoDB locally
   - **Option B**: Use MongoDB Atlas (cloud)
   - **Option C**: Use Docker (recommended)

## üöÄ Quick Start

### Step 1: Clone and Install Dependencies

```powershell
# Navigate to your project directory
cd C:\Users\hp\Desktop\tried\trekk-tribeclass

# Install all dependencies
npm run install:all
```

### Step 2: Set Up Environment Variables

```powershell
# Generate secure secrets
.\generate-secrets.ps1

# Copy environment files
cp .env.example .env
cp services/api/.env.example services/api/.env
cp web/.env.example web/.env
```

### Step 3: Configure Environment Variables

Edit `services/api/.env` with your values:

```env
# Database (choose one option below)
MONGODB_URI=mongodb://127.0.0.1:27017/trekktribe  # For local MongoDB
# OR
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/trekktribe  # For MongoDB Atlas

# Use the secrets generated by the script
JWT_SECRET=your-generated-jwt-secret
SESSION_SECRET=your-generated-session-secret

# Local development settings
FRONTEND_URL=http://localhost:3000
PORT=4000
NODE_ENV=development

# Optional: Email configuration for notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=noreply@trekktribe.com
```

Edit `web/.env`:
```env
REACT_APP_API_URL=http://localhost:4000
```

### Step 4: Set Up Database (Choose One Option)

#### Option A: Docker MongoDB (Recommended)
```powershell
# Install Docker Desktop for Windows first
# Then run MongoDB in a container
docker run -d -p 27017:27017 --name trekk-mongo mongo:6
```

#### Option B: Local MongoDB Installation
1. Download MongoDB Community Server
2. Install with default settings
3. Start MongoDB service

#### Option C: MongoDB Atlas (Cloud)
1. Follow the MongoDB Atlas setup from the deployment guide
2. Use the Atlas connection string in your `.env` file

### Step 5: Run the Application

```powershell
# Option 1: Run both services simultaneously
npm run dev

# Option 2: Run services separately (in different terminals)
# Terminal 1 - API
npm run dev:api

# Terminal 2 - Web App  
npm run dev:web
```

### Step 6: Access the Application

- **Frontend**: http://localhost:3000
- **Backend API**: http://localhost:4000
- **API Health Check**: http://localhost:4000/health

## üß™ Testing the Application

1. **Register a new user**
   - Go to http://localhost:3000
   - Click "Join Tribe" to register

2. **Test as Organizer**
   - Register with role "organizer"
   - Create a new trip
   - Check if trip appears in listings

3. **Test as Traveler**
   - Register another account with role "traveler"
   - Browse and join trips
   - Check notifications

4. **Test Notifications**
   - Join/leave trips
   - Delete trips (as organizer)
   - Check real-time notifications
   - Check email notifications (if configured)

## üîß Development Commands

```powershell
# Install dependencies for all services
npm run install:all

# Start all services with Docker
npm run dev

# Start API only
npm run dev:api

# Start web app only
npm run dev:web

# Build for production
npm run build

# Generate secure secrets
.\generate-secrets.ps1
```

## üìÅ Project Structure

```
trekk-tribeclass/
‚îú‚îÄ‚îÄ services/api/          # Backend API (Node.js + Express)
‚îú‚îÄ‚îÄ web/                   # Frontend (React)
‚îú‚îÄ‚îÄ .env.example          # Environment variables template
‚îú‚îÄ‚îÄ docker-compose.yml    # Docker configuration
‚îú‚îÄ‚îÄ generate-secrets.ps1  # Secret generation script
‚îî‚îÄ‚îÄ package.json          # Root package.json
```

## üêõ Common Issues & Solutions

### Issue 1: "npm: command not found"
**Solution**: Install Node.js from [nodejs.org](https://nodejs.org/)

### Issue 2: Database connection fails
**Solution**: 
- Check if MongoDB is running
- Verify the connection string in `.env`
- For Docker: `docker ps` to check container status

### Issue 3: Port already in use
**Solution**:
- Change ports in environment variables
- Kill existing processes: `netstat -ano | findstr :4000`

### Issue 4: Real-time notifications not working
**Solution**:
- Check browser console for errors
- Verify Socket.IO connection
- Ensure both frontend and backend are running

### Issue 5: Email notifications not working
**Solution**:
- Check SMTP configuration
- For Gmail: use App Passwords, not regular password
- Verify email credentials

## üìä Development Tools

### Useful Browser Extensions
- **React Developer Tools**: Debug React components
- **Redux DevTools**: If you add Redux later

### API Testing
- Use browser to test: http://localhost:4000/health
- Test API endpoints with tools like Postman
- Check network tab in browser dev tools

### Database Management
- **MongoDB Compass**: GUI for MongoDB
- **Studio 3T**: Advanced MongoDB IDE

## üöÄ Ready for Production?

When your local development is working perfectly:
1. Follow the `DEPLOYMENT_GUIDE.md` for production deployment
2. Test the deployed version thoroughly
3. Set up monitoring and logging

## üìû Need Help?

- Check the logs in terminal/console
- Verify all environment variables are set
- Ensure all services are running
- Test each component individually
